# Simple Quant & Stock Playground

**Simple Quant** æ˜¯ä¸€ä¸ªåŸºäº Python çš„äº‹ä»¶é©±åŠ¨é‡åŒ–äº¤æ˜“å›æµ‹æ¡†æ¶ï¼Œé›†æˆäº†è‡ªä¸» AI ä»£ç†ï¼ˆAgentï¼‰ï¼Œèƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆã€æµ‹è¯•å’Œä¼˜åŒ–äº¤æ˜“ç­–ç•¥ã€‚æœ¬é¡¹ç›®æ—¨åœ¨æä¾›ä¸€ä¸ªç¨³å¥çš„é‡åŒ–ç ”ç©¶å¹³å°ï¼Œå¼ºè°ƒç­–ç•¥çš„ç¨³å®šæ€§å’ŒæŠ—è¿‡æ‹Ÿåˆèƒ½åŠ›ã€‚

---

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

### 1. ğŸ¤– AI ç­–ç•¥ä»£ç† (Autonomous Agent)
- **è‡ªä¸»ç¼–ç¨‹**ï¼šåŸºäº LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰è‡ªåŠ¨ç¼–å†™ Python ç­–ç•¥ä»£ç ã€‚
- **è‡ªæˆ‘ä¿®å¤**ï¼šè‡ªåŠ¨æ•è·å›æµ‹æŠ¥é”™ï¼Œå¹¶å°†é”™è¯¯åé¦ˆç»™ LLM è¿›è¡Œä»£ç ä¿®å¤ã€‚
- **è‡ªåŠ¨éªŒè¯**ï¼šç”Ÿæˆçš„ç­–ç•¥ä¼šè‡ªåŠ¨åœ¨è®­ç»ƒé›†ä¸Šè¿›è¡ŒéªŒè¯ï¼Œå¹¶ä¿å­˜å›æµ‹æŠ¥å‘Šã€‚
- **é™çº§æ¨¡å¼**ï¼šè‹¥ LLM æœåŠ¡ä¸å¯ç”¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§åˆ° Mock æ¨¡å¼æ¼”ç¤ºæµç¨‹ã€‚

### 2. ğŸ›¡ï¸ ç¨³å¥å›æµ‹å¼•æ“ (Robust Portfolio)
- **çœŸå®èµ„é‡‘é£æ§**ï¼šäº¤æ˜“å‰å®æ—¶æ£€æŸ¥ç°é‡‘ä½™é¢ï¼Œæœç»â€œæ— é™èµ„é‡‘â€ä½œå¼Šã€‚
- **é«˜çº§è¯„ä»·æŒ‡æ ‡**ï¼š
  - **Stability Score (ç¨³å¥æ€§å¾—åˆ†)**ï¼šç»¼åˆå¤æ™®æ¯”ç‡å’Œæœ€å¤§å›æ’¤çš„å¤åˆæŒ‡æ ‡ã€‚
  - **Calmar Ratio**ï¼šå¹´åŒ–æ”¶ç›Š / æœ€å¤§å›æ’¤ã€‚
  - **Sortino Ratio**ï¼šä¸‹è¡Œé£é™©è°ƒæ•´æ”¶ç›Šã€‚
- **ç²¾å‡†æ’®åˆ**ï¼šæ”¯æŒæ¨¡æ‹Ÿå®ç›˜çš„è®¢å•æ’®åˆé€»è¾‘ï¼ˆå¤„ç†åœç‰Œã€æ¶¨è·Œåœç­‰ï¼‰ã€‚

### 3. ğŸ” ç­–ç•¥æ¢ç´¢ (Exploration & Optimization)
- **å‚æ•°ç½‘æ ¼æœç´¢**ï¼šè‡ªåŠ¨éå†ç­–ç•¥å‚æ•°ï¼ˆå¦‚å‡çº¿å‘¨æœŸï¼‰ã€‚
- **æ ·æœ¬å¤–éªŒè¯ (Walk-Forward)**ï¼š
  - **è®­ç»ƒé›† (In-Sample)**ï¼š2020-2023 å¹´æ•°æ®ç”¨äºç­›é€‰ã€‚
  - **æµ‹è¯•é›† (Out-of-Sample)**ï¼š2024 å¹´æ•°æ®ç”¨äºéªŒè¯ã€‚
  - **è¿‡æ‹Ÿåˆæ£€æµ‹**ï¼šè‡ªåŠ¨æ ‡è®°åœ¨æµ‹è¯•é›†è¡¨ç°å¤§å¹…ä¸‹æ»‘çš„ç­–ç•¥ä¸º `FAIL`ã€‚

### 4. ğŸ“Š ä¸“ä¸šæ•°æ®æº (Data Feeds)
- **TDX (é€šè¾¾ä¿¡)**ï¼šé›†æˆ `pytdx` æ¥å£ï¼Œé«˜é€Ÿè·å– A è‚¡ï¼ˆæ²ªæ·±ï¼‰5 å¹´ä»¥ä¸Šçš„é«˜é¢‘/æ—¥çº¿æ•°æ®ã€‚
- **CSV æ”¯æŒ**ï¼šå…¼å®¹ Yahoo Finance æ ¼å¼çš„ CSV æ•°æ®å¯¼å…¥ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (å¯é€‰)
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate   # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
# æ¨èå®‰è£… pytdx è·å–é«˜è´¨é‡æ•°æ®
pip install pytdx
```

### 2. é…ç½® AI (å¯é€‰)

å¤åˆ¶å¹¶ç¼–è¾‘ `.env` æ–‡ä»¶ä»¥é…ç½® LLM æœåŠ¡ï¼ˆå¦‚ LocalAI, vLLM, OpenAI, DeepSeekï¼‰ï¼š

```env
MODEL_URL=http://localhost:11434/v1/chat/completions
MODEL_API_KEY=your-api-key
MODEL_NAME=deepseek-coder
```

### 3. è·å–æ•°æ®

#### æŒ‰æ¿å—æ‰¹é‡ä¸‹è½½ (æ¨è)
æœ¬é¡¹ç›®å†…ç½®äº†ç²¾é€‰çš„æ¿å—æ•°æ®è·å–è„šæœ¬ï¼Œæ”¯æŒ **TDX (é€šè¾¾ä¿¡)** é«˜é€Ÿæ¥å£ï¼Œå¹¶è‡ªåŠ¨é™çº§åˆ° **Yahoo Finance**ã€‚

```bash
# è·å– AI/ç¡¬ç§‘æŠ€æ¿å— (ç§‘å¤§è®¯é£, å·¥ä¸šå¯Œè”ç­‰)
python stock_playground/scripts/fetch_sector_data.py --sector ai

# è·å– ç¨³å¥/é«˜è‚¡æ¯æ¿å— (èŒ…å°, é•¿æ±Ÿç”µåŠ›ç­‰)
python stock_playground/scripts/fetch_sector_data.py --sector stable
```

### 4. è¿è¡Œ AI ç­–ç•¥ä»£ç†

è®© AI å¸®ä½ å†™ä¸€ä¸ªç­–ç•¥ï¼š

```bash
python stock_playground/agent/manager.py "å†™ä¸€ä¸ªåŸºäº RSI è¶…ä¹°è¶…å–çš„å‡å€¼å›å½’ç­–ç•¥"
```
*ç”Ÿæˆçš„ç­–ç•¥å°†ä¿å­˜åœ¨ `stock_playground/generated_strategies/` ç›®å½•ä¸‹ã€‚*

### 5. æ¢ç´¢æœ€ä½³å‚æ•°

å¯¹ AI æ¿å—è¿›è¡Œå‚æ•°æŒ–æ˜å’Œç¨³å¥æ€§æµ‹è¯•ï¼š

```bash
python stock_playground/explore_strategies.py --data_dir stock_playground/data/ai
```

### 6. ç­–ç•¥å¯è§†åŒ–

å°†å›æµ‹ç»“æœå¯è§†åŒ–ä¸ºå›¾è¡¨ï¼Œç›´è§‚æŸ¥çœ‹ä¹°å–ç‚¹ï¼š

```bash
python stock_playground/visualize_strategy.py \
    stock_playground/generated_strategies/YOUR_STRATEGY_FOLDER/strategy.py \
    --data stock_playground/data/ai \
    --symbol 002230.SZ \
    --output result.png
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
playground/
â”œâ”€â”€ stock_playground/
â”‚   â”œâ”€â”€ agent/                 # AI ä»£ç†æ ¸å¿ƒæ¨¡å— (Manager, Executor, Client)
â”‚   â”œâ”€â”€ simple_quant/          # é‡åŒ–æ¡†æ¶æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ data/              # æ•°æ®å¤„ç† (TDX, CSV)
â”‚   â”‚   â”œâ”€â”€ strategy/          # ç­–ç•¥åŸºç±»ä¸æ ‡å‡†ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ portfolio/         # æŠ•èµ„ç»„åˆä¸èµ„é‡‘ç®¡ç† (RobustPortfolio)
â”‚   â”‚   â”œâ”€â”€ execution/         # è®¢å•æ‰§è¡Œæ¨¡æ‹Ÿ
â”‚   â”‚   â””â”€â”€ engine.py          # äº‹ä»¶é©±åŠ¨å›æµ‹å¼•æ“
â”‚   â”œâ”€â”€ scripts/               # æ•°æ®è·å–è„šæœ¬ (fetch_sector_data.py)
â”‚   â”œâ”€â”€ generated_strategies/  # AI ç”Ÿæˆçš„ç­–ç•¥ä»“åº“
â”‚   â”œâ”€â”€ explore_strategies.py  # å‚æ•°æ¢ç´¢è„šæœ¬
â”‚   â””â”€â”€ visualize_strategy.py  # å¯è§†åŒ–å·¥å…·
â”œâ”€â”€ data/                      # å†å²è¡Œæƒ…æ•°æ® (.csv)
â”œâ”€â”€ docs/                      # è¯¦ç»†æ–‡æ¡£
â”‚   â”œâ”€â”€ STRATEGY_GUIDE.md      # ç­–ç•¥æŒ‡å— & Agent Prompt æ‰‹å†Œ
â”‚   â”œâ”€â”€ QUANT_INDICATORS_GUIDE.md # æŒ‡æ ‡æ·±åº¦è§£æ
â”‚   â””â”€â”€ DATA_SELECTION_STRATEGY.md # é€‰å“ç­–ç•¥
â”œâ”€â”€ .env                       # ç¯å¢ƒå˜é‡é…ç½®
â””â”€â”€ requirements.txt           # é¡¹ç›®ä¾èµ–
```

## ğŸ“ˆ å…³é”®æŒ‡æ ‡è¯´æ˜

| æŒ‡æ ‡ | ç†æƒ³èŒƒå›´ | è¯´æ˜ |
| :--- | :--- | :--- |
| **Stability Score** | > 0.5 | æˆ‘ä»¬è‡ªç ”çš„ç¨³å¥æ€§å¾—åˆ†ï¼Œè¶Šé«˜è¶Šå¥½ã€‚ |
| **Sharpe Ratio** | > 1.0 | æ‰¿æ‹…å•ä½é£é™©è·å¾—çš„è¶…é¢å›æŠ¥ã€‚ |
| **Max Drawdown** | < 15% | å†å²æœ€å¤§å›æ’¤ï¼Œè¶Šä½è¶Šå¥½ã€‚ |
| **Calmar Ratio** | > 1.0 | æ”¶ç›Šå›æ’¤æ¯”ï¼Œè¡¡é‡ç­–ç•¥æ€§ä»·æ¯”ã€‚ |

---
*Created by Antigravity Agent*
